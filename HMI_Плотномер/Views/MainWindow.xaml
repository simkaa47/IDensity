<Window x:Class="HMI_Плотномер.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:HMI_Плотномер"
        xmlns:vm="clr-namespace:HMI_Плотномер.ViewModels"
        xmlns:conv="clr-namespace:HMI_Плотномер.Views.Converters"
        xmlns:oxy="http://oxyplot.org/wpf"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800">    
    <Window.Resources>
        <conv:InterpolationConverter x:Key="InterpolationConverter"/>
        <Style TargetType="Border">
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="Black"/>            
        </Style>
    </Window.Resources>
    <Grid>
        <!--#region Верхний бар -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <!--#region Эмблема заказчика -->
            <Border Grid.Column="0" Margin="5" >
                <TextBlock Text="Место для эмблемы заказчика" VerticalAlignment="Center" HorizontalAlignment="Center" TextWrapping="Wrap"></TextBlock>
            </Border>
            <!--#endregion-->
            <!--#region Серийный номер -->
            <Border Grid.Column="1"  Margin="5" >
                <UniformGrid Rows="2">
                    <TextBlock Text="Серийный номер:" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>
                    <TextBlock Text="000000" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>
                </UniformGrid>
            </Border>
            <!--#endregion-->
            <!--#region Индикатор связи с платой -->
            <Border Grid.Column="2" Margin="5">
                <TextBlock Text="Сязь с платой" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>
            </Border>
            <!--#endregion-->
            <!--#region Время и пользователь -->
            <Border Grid.Column="5" Margin="5">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                    </Grid.RowDefinitions>
                    <Button Grid.Row="1"  MouseDoubleClick="Logout_click"  Content="{Binding CurUserName}"></Button>
                </Grid>
            </Border>
            <!--#endregion-->
            <!--#region Кнопка закрыть приложение -->
            <Button Grid.Column="6" Margin="5" Command="{Binding CloseAppCommand}" >Закрыть приложение</Button>
            <!--#endregion-->
        </Grid>
        <!--#endregion-->
        <TabControl Grid.Row="1" TabStripPlacement="Bottom" >
            <!--#region Вкладка управление -->
            <TabItem Header="УПРАВЛЕНИЕ">
                <Grid>
                    <!--#region Развбивка на 4 части экрана -->
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                    </Grid.RowDefinitions>
                    <!--#endregion-->
                    <oxy:Plot Grid.Row="0" x:Name="plot"  PlotAreaBackground="LightGray">
                        <oxy:Plot.Annotations >
                            <oxy:LineAnnotation Type="Horizontal" Y="22" Color="Blue"  StrokeThickness="1"   />
                            <oxy:LineAnnotation Type="Horizontal" Y="28" Color="Red"   StrokeThickness="1"  />
                        </oxy:Plot.Annotations>
                        <oxy:Plot.Axes>
                            <oxy:LinearAxis    Title ="Значение"  Position ="Left" AbsoluteMinimum="0"  AbsoluteMaximum ="70000" ></oxy:LinearAxis>
                            <oxy:DateTimeAxis    MaximumRange="{Binding PlotTime}" IntervalType="Auto" ></oxy:DateTimeAxis>
                        </oxy:Plot.Axes>
                        <oxy:ThreeColorLineSeries      LineStyleHi="Dash"  
                                           LineStyleLo="Dash"  CanTrackerInterpolatePoints="True"                                                     
                                           InterpolationAlgorithm="{Binding InterpolIndex, Converter={StaticResource InterpolationConverter}}"
                                           ItemsSource="{Binding TimePoints}"
                                           DataFieldX="time" DataFieldY="y" 
                                           Color="Black" ColorHi="Red" 
                                           ColorLo="Blue" LimitHi="28" 
                                           LimitLo="22"/>

                    </oxy:Plot>
                    <TextBox Grid.Row="1" Text="{Binding PlotTime, Mode=OneWay, UpdateSourceTrigger=LostFocus}"></TextBox>
                </Grid>
            </TabItem>
            <!--#endregion-->
        </TabControl>
        <Grid.RowDefinitions>
            <RowDefinition Height="0.1*" ></RowDefinition>
            <RowDefinition ></RowDefinition>
        </Grid.RowDefinitions>
            
        
    </Grid>
</Window>
